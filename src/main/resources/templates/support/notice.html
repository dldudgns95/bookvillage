<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{/layout/header::head('공지사항')}"></head>

<style>
	div.child1{
		width: 100px;
		height: 300px;
		float:left;
		margin-top: 50px;
		margin-right:20px;
		background-color: lightsteelblue;
		text-align: center;
		
		
	}
	div.child2{
		width: 750px;
		height: 200px;
		float:left;
		text-align: center;
	}
	
</style>

<body>

  <div th:replace="~{/layout/header::header}"></div>
  <div class="parent">
    <div class="wrap wrap_9">
      <div class="child1">
        <ul>
          <li style="margin:20px"><a th:href="@{/support/notice.do}">공지사항</a></li>
		  <li style="margin:20px"><a th:href="@{/support/faq.do}">FAQ</a></li>
		  <li style="margin:20px"><a th:href="@{/qna/list.do}">1:1문의</a></li>
        </ul>
      </div>
      <h5 style="text-align: center;">공지사항</h5>
      <div>
		  <a th:href="@{/support/noticewrite.form}">
            <button type="button" class="btn btn-outline-primary">새 공지 작성하기</button>
          </a>
        <!-- 관리자로 로그인 한 경우 -->
        <th:block th:if="${session.user != null and session.user.state == 9}">
          
        </th:block>
      </div>
      <div class="child2">
      <div class="table-responsive">
        <table class="table align-middle">
          <thead>
            <tr>
              <td>순번</td>
              <td>제목</td>
              <td>작성일자</td>
            </tr>
          </thead>
          <tbody>
            <th:block th:each="n, vs:${notice}">
              <tr class="align-bottom">
                <td th:text="${beginNo - vs.index}"></td>
                <td th:text="${n.ntTitle}"></td>
                <td th:text="${n.ntDate}"></td>
              </tr>
            </th:block>
          </tbody>
          <tfoot th:if="${not #lists.isEmpty(notice)}">
            <tr>
              <td colspan="3" th:utext="${paging}"></td>
            </tr>
          </tfoot>
        </table>
      </div>
   </div>
   </div>
   <script th:inline="javascript">
	    const fnAddResult = () => {
        let addResult = /*[[${addResult}]]*/ null;
        if(addResult !== null){
          if(addResult === 1){
            alert('공지사항이 작성되었습니다.');
          } else {
            alert('공지사항 작성이 실패했습니다.');
          }
        }
      }
      
      const fnRemoveResult = () => {
        let removeResult = /*[[${removeResult}]]*/ null;
        if(removeResult !== null){
          if(removeResult === 1){
            alert('공지사항이 삭제되었습니다.');
            $('#upload_list').empty();
          } else {
            alert('공지사항 삭제가 실패했습니다.');
          }
        }
      }
    
      fnAddResult();
      fnRemoveResult();
   </script>
</div>
</body>
</html>
